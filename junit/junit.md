# junit 



## 단언 3.1


  + assertTrue 
  + assertThat - 값 비교



## hamcrest 

 + 잘 활용하면 테스트 코드 표현력이 더 좋아진다.
 + equalTo  - equals() 메서드 사용해 어떤 타입이든 비교가능. 
 + 기존 사용했던것처럼 assertThat(a).equalTo(a) 이런식으로 표현 하면 될 듯.

### CoreMatchers Class


 + is 
 + assertThat(account.getName(), is(equalTo("my big fat acct")));

 + not
 + assertThat(account.getName(), not(equalTo("plunderings")));


 + isCloseTo - 부동소수점 비교 매처
 + assertThat(2.32 * 3, closeTo(6.96, 0.0005));


### hamcrest 매처 사용시 

 + 객체 타입 검사 
 + 두 객체 참조 같은 인스턴스 검사 등..

## 단언 설명

 + assertThat에 메세지를 포함하여 테스트가 가능.
 + assertThat("account balance is 100", account.getBalance(), equalTo(50));


## 예외 기대

 + 에너테이션 방식
 + Try/catch 
 + ExpectedException 규칙.


### ExpectedException

 + @Rule
 + public ExpectedException thrown = ExpectedException.none();
 + 이런식으로 룰로 만들어 예외를 기대 할 수 도 있다 기존 junit5쓰면 thownBy를 주로 썻는데 음..


# 테스트 조직


## AAA 테스트 일관성 유지

 + 준비(Arrange) / 실행(Act) / 단언 (Assert)


## 동작 테스트 vs 메서드 테스트

 + 테스트는 클래스 동작에 집중해야지 개별 메서드 테스트한다 생각하면 안됨

## 테스트와 프로덕션 코드의 관계

 + 테스트는 프로덕션 코드와 분리를 해야 된다.


### 데스트와 프로덕션 코드 분리

 + 테스트를 별도 디렉터리로 분리하지만 프로덕션과 같은 패키지에 넣기 - 현제 IDE 디폴트 동작
 + 테스트를 별도의 디렉터리와 유사한 패키지에 유지하기 - > test - test -> ...   의도적으로 이렇게 설계하는 경우도 잇다.



### 내부 데이터 노출 vs 내부 동작 노출

 + 테스트 코드를 작성할때 공개 인터페이스만 사용하는게 좋다?
 + 공개가 아닌 메서드를 테스트 코드에 사용시 정보 은닉에 위반되기 때문!
 + 그러나 비공개 코드 호출하는 테스트 자체는 구현 세부사항과 결속을 가지게되 세부 사항이 변경되면 테스트가 깨진다.
 + 이런게 쌓이면 나중엔 리팩토링하기도 꺼려지고 정체된 코드가 되버림.



## 단일 목적 테스트의 가치

 + 한 테스트의 여러개의 검증을 넣는것은 지양해야된다.
 + 실패할경우 실패한 테스트 이름이 주어지는대 여러가지가 있다면 검증하기 쉽지않음.


## 문서로 서의 테스트

 + 클래스에 대한 지속적이고 믿을 수 있는 문서 역할을 해야함.
 + 일관석있고 설명이 들어가있는 테스트 이름을 정하자 ( 근대너무 길어지는경우도 있는거같아 별로인거같다.)
 + given when then 행위주도 개발 양식도 추천하고 있따.



## Beforㄷ / After

 + @BeforeClass라는 어노테이션도 있다 참고



# 좋은 테스트의 Firest 속성

 + First : 빠르고 고립되었으며 반복가능하고 스스로 검증가능한 적시의 뜻.


## 빠르다.

 + 외부 요소를 배제시키고 고립되게 테스트 
 + 단위 테스트 시간이 오래걸린다면 (양이 많을경우 10~30분) 잘못된 방향이다.
 + 의존 성을 줄이는 것부터 시작해야 된다.

 + 정리하면 클린 객체 지향 설계 개념과 맞출수록 단위테스트 작성은 쉬워짐


## 고립

 + 최대한 작은 양의 동작에 집중할수 있게 테스트 작성하자
 + SRP 법칙에 따라 다른이유로 테스트가 깨진다면 분리를 하는것을 고려해야 한다.


## 반복

 + 테스트는 항상 결과가 같아야 한다.


## 검증

 + 테스트는 어떤설정 단계든 자동으로 수동으로 검증해서는 안됀다.
 + 스스로 검증 가능하고 준비도 해야됨



## 적시에 사용

 + 언제라도 단위 테스트를 작성할 수 있어야 한다.



# Right-BIICEP : 무엇을 테스트 할까? -06 